# Installing cruisecontrol & unit test tools on test.pear.php.net

# Old test runner
# Checkout relevant code, copy files to the correct spots
$ cd ~/
$ svn co http://svn.php.net/repository/pear/ci/phpuc/trunk phpuc
$ svn co http://svn.php.net/repository/pear/packages-all packages-all
$ cp phpuc/unit-test-results packages-all/unit-test-results
$ cp phpuc/run-tests.sh .
$ cp phpuc/migrate.php .
$ cp phpuc/tests.php packages-all
$ chmod +x run-tests.sh
$ chmod -R 777 packages-all/unit-test-results

# Add a symlink from pearweb to your local folder
$ ln -s /var/www/html/pear_www/pear.php.net/public_html/unit-test-results ~/packages-all/unit-test-results

# Crontab:
2  *  *   *   *     ./run-tests.sh


# Cruise control - refer to http://blueparabola.com/blog/installing-phpundercontrol-debian-etch if this isn't working for you
sudo apt-get install sun-java6-jdk ant git-core
ln -s /usr/bin/java /bin/java

# Cruise control 2.8.3
wget "http://downloads.sourceforge.net/project/cruisecontrol/CruiseControl/2.8.3/cruisecontrol-bin-2.8.3.zip?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fcruisecontrol%2Ffiles%2FCruiseControl%2F2.8.3%2F&ts=1281930924&mirror=internode"
unzip cruisecontrol-bin-2.8.3.zip
ln -s cruisecontrol-bin-2.8.3 cruisecontrol

# PHPUC - http://phpundercontrol.org/documentation/installation.html
git clone git://github.com/phpundercontrol/phpUnderControl.git
phpUnderControl/bin/phpuc.php install ~/cruisecontrol

# setup a specific project
php generate-project.php Net_IPv6 ~/packages-all ~/cruisecontrol 

# setup all phpunit compatable projects!
php generate-all.php ~/packages-all ~/cruisecontrol 